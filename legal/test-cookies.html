<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Bandeau Cookies - FR RSL</title>
    <link rel="shortcut icon" href="assets/images/logos/logo.png">
    <link rel="stylesheet" href="../assets/css/main.css">
    <style>
        .test-container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 2rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
        }
        .test-button {
            background: #4460ff;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            margin: 0.5rem;
            font-size: 1rem;
        }
        .test-button:hover {
            background: #3b4de8;
        }
        .status {
            background: rgba(255, 255, 255, 0.1);
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div class="particles"></div>
    
    <header>
        <div class="logo-section">
            <img src="assets/images/logos/logo.png" alt="Logo FR RSL">
            <h1>FR RSL - Test Cookies</h1>
        </div>
        <nav>
            <a href="index.html">Accueil</a>
        </nav>
    </header>

    <div class="test-container">
        <h1 style="color: #ffb700;">ğŸª Test du SystÃ¨me de Cookies</h1>
        
        <p>Cette page permet de tester le bandeau de consentement aux cookies.</p>
        
        <div class="status" id="cookie-status">
            <strong>Statut actuel :</strong> <span id="status-text">Chargement...</span>
        </div>
        
        <h2 style="color: #4460ff;">Actions de test :</h2>
        
        <button class="test-button" onclick="showCurrentStatus()">
            ğŸ“Š Afficher le statut actuel
        </button>
        
        <button class="test-button" onclick="cookieConsent.resetConsent()">
            ğŸ”„ RÃ©initialiser les cookies (recharge la page)
        </button>
        
        <button class="test-button" onclick="cookieConsent.showSettings()">
            âš™ï¸ Ouvrir les paramÃ¨tres
        </button>
        
        <button class="test-button" onclick="testAnalytics()">
            ğŸ“ˆ Tester Google Analytics
        </button>
        
        <button class="test-button" onclick="testAds()">
            ğŸ“¢ Tester les publicitÃ©s
        </button>
        
        <h2 style="color: #4460ff;">Informations techniques :</h2>
        
        <div class="status">
            <strong>LocalStorage :</strong><br>
            <pre id="localstorage-content"></pre>
        </div>
        
        <div class="status">
            <strong>Scripts chargÃ©s :</strong><br>
            <span id="scripts-loaded"></span>
        </div>
        
        <h2 style="color: #4460ff;">Pages lÃ©gales :</h2>
        <p>VÃ©rifiez que toutes les pages lÃ©gales sont accessibles :</p>
        
        <a href="mentions-legales.html" class="test-button" style="display: inline-block; text-decoration: none;">
            ğŸ“„ Mentions LÃ©gales
        </a>
        
        <a href="privacy-policy.html" class="test-button" style="display: inline-block; text-decoration: none;">
            ğŸ”’ Politique de ConfidentialitÃ©
        </a>
        
        <a href="terms-of-service.html" class="test-button" style="display: inline-block; text-decoration: none;">
            ğŸ“‹ Conditions d'Utilisation
        </a>
        
        <a href="disclaimer.html" class="test-button" style="display: inline-block; text-decoration: none;">
            âš ï¸ Disclaimer Fansite
        </a>
    </div>

    <!-- Scripts -->
    <script src="assets/js/main.js"></script>
    <script src="assets/js/cookies.js"></script>
    <script src="assets/js/ads.js"></script>
    
    <script>
        const GA_MEASUREMENT_ID = 'GA_MEASUREMENT_ID';
        
        function showCurrentStatus() {
            const consent = cookieConsent.getConsentLevel();
            const statusText = document.getElementById('status-text');
            
            if (!consent) {
                statusText.textContent = 'Aucun consentement donnÃ©';
                statusText.style.color = '#ef4444';
            } else {
                const prefs = consent.preferences;
                statusText.innerHTML = `
                    Consentement donnÃ© le ${new Date(consent.timestamp).toLocaleString()}<br>
                    Essentiels: âœ… | Analytiques: ${prefs.analytics ? 'âœ…' : 'âŒ'} | PublicitÃ©s: ${prefs.advertising ? 'âœ…' : 'âŒ'}
                `;
                statusText.style.color = '#10b981';
            }
            
            updateTechnicalInfo();
        }
        
        function updateTechnicalInfo() {
            // LocalStorage
            const localStorageContent = document.getElementById('localstorage-content');
            const cookieData = localStorage.getItem('fr-rsl-cookie-consent');
            localStorageContent.textContent = cookieData ? JSON.stringify(JSON.parse(cookieData), null, 2) : 'Aucune donnÃ©e';
            
            // Scripts chargÃ©s
            const scriptsLoaded = document.getElementById('scripts-loaded');
            const scripts = [];
            if (window.gtag) scripts.push('Google Analytics âœ…');
            if (window.adsbygoogle) scripts.push('Google AdSense âœ…');
            scriptsLoaded.innerHTML = scripts.length > 0 ? scripts.join('<br>') : 'Aucun script externe chargÃ©';
        }
        
        function testAnalytics() {
            if (window.gtag) {
                gtag('event', 'test_event', {
                    'event_category': 'test',
                    'event_label': 'cookie_test_page'
                });
                alert('âœ… Ã‰vÃ©nement Google Analytics envoyÃ© !');
            } else {
                alert('âŒ Google Analytics non chargÃ©. VÃ©rifiez le consentement aux cookies analytiques.');
            }
        }
        
        function testAds() {
            const adContainers = document.querySelectorAll('.ad-container');
            if (adContainers.length > 0) {
                alert(`âœ… ${adContainers.length} emplacements publicitaires trouvÃ©s !`);
            } else {
                alert('âŒ Aucun emplacement publicitaire trouvÃ©. VÃ©rifiez le consentement aux cookies publicitaires.');
            }
        }
        
        // Mise Ã  jour automatique du statut
        setInterval(showCurrentStatus, 2000);
        
        // Affichage initial
        setTimeout(showCurrentStatus, 1000);
    </script>
</body>
</html>
